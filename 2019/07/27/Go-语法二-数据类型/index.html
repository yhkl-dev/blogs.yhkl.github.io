<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <script>if (/*@cc_on!@*/false || (!!window.MSInputMethodContext && !!document.documentMode)) window.location.href="https://support.dmeng.net/upgrade-your-browser.html?referrer="+encodeURIComponent(window.location.href); </script>
    
    
        <link rel="shortcut icon" href="/images/favicon.png">
    
     
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.2.30/dist/vuetify.min.css" rel="stylesheet">
    
<link rel="stylesheet" href="/css/main.css">

    
    







    
    
          

    
    
    
    
    <title>
        
            Go-语法二-数据类型 | YHKL Blog
        
    </title>
    
    
<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    <div id="app">
        <v-app>
            <v-content id="page">
                <v-container fluid>
                    <v-row>
                        <v-col cols="2" class="d-none d-md-block">
                            <div id="sidebar" class="float-right">
    <a href="/" rel="home">
        <v-avatar size=96>
            <img id="logo" src="/images/avatar.webp">     
        </v-avatar> 
    </a>
    <v-divider></v-divider>
    <div class="mini-menu">
        <v-btn icon href="/">
            <v-icon>home</v-icon>
        </v-btn>
        <v-btn icon href="/categories/">
            <v-icon>folder</v-icon>
        </v-btn>
        <v-btn icon href="/tags/">
            <v-icon>bookmark</v-icon>
        </v-btn>
        <v-btn icon @click="SetNightMode">
            <v-icon>{{ nightMode }}</v-icon>
        </v-btn>
    </div>
    <v-list id="main-menu" class="font-weight-bold" flat>
        
            
            <v-list-item href="/" link>
            <v-list-item-icon><v-icon>home</v-icon></v-list-item-icon>
            <v-list-item-content>
                Home
            </v-list-item-content>
            </v-list-item>
        
            
            <v-list-item href="/archives/" link>
            <v-list-item-icon><v-icon>archive</v-icon></v-list-item-icon>
            <v-list-item-content>
                Archives
            </v-list-item-content>
            </v-list-item>
        
            
            <v-list-item href="/about/" link>
            <v-list-item-icon><v-icon>account_circle</v-icon></v-list-item-icon>
            <v-list-item-content>
                About
            </v-list-item-content>
            </v-list-item>
        
    </v-list>
    <v-divider></v-divider>
    
        <div class="post-toc">
            <a href="/2019/07/27/Go-%E8%AF%AD%E6%B3%95%E4%BA%8C-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" class="toc-header">Table of Contents</a>
            <div class="toc-content">
                <ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.</span> <span class="toc-text">一、基础类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%B8%83%E5%B0%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.</span> <span class="toc-text">1.布尔类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.2.</span> <span class="toc-text">2.数值类型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">1.3.</span> <span class="toc-text">3.字符串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.4.</span> <span class="toc-text">4.数据类型转换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D"><span class="toc-number">1.5.</span> <span class="toc-text">5.类型别名</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.</span> <span class="toc-text">二、复合类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E6%95%B0%E7%BB%84"><span class="toc-number">2.1.</span> <span class="toc-text">1.数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">2.2.</span> <span class="toc-text">2.结构体</span></a></li></ol></li></ol>
            </div>
        </div>
    

    <div id="footer">
        <div class="footer-social">
            
                
                <v-btn icon href="mailto:kb1000fx@gmail.com" target="_blank">
                    <v-icon>fas fa-envelope</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://github.com/yhkl-dev" target="_blank">
                    <v-icon>fab fa-github</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://steamcommunity.com/profiles/76561198346798163" target="_blank">
                    <v-icon>fab fa-steam</v-icon>
                </v-btn>
            
                
                <v-btn icon href="https://weibo.com/kb1000fx" target="_blank">
                    <v-icon>fab fa-weibo</v-icon>
                </v-btn>
            
        </div>
        <v-divider></v-divider>
        <div class="footer-content">
            
                <span id="busuanzi_container_site_uv" style="display: none;"> 
                    Total Visitors <span id="busuanzi_value_site_uv"></span>
                </span>
                <br>
            
            <span>Theme: <a target="_blank" rel="noopener" href="https://github.com/kb1000fx/hexo-theme-insulin">Insulin</a></span><br>
            <span>Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span><br>
            <span>
                &copy; 2015 - 2021 
                yhkl
            </span>
        </div>
    </div>
</div>

                        </v-col>
                        <v-col cols="12" md="10">
                            <v-row>
  <v-col cols="12" md="8" align-self="end">
    <div id="site-header">
      <div id="site-title">
        <a href="/" rel="home">YHKL Blog</a>
      </div>
      <div id="site-description"></div>
      <div id="mobile-menu" class="d-block d-md-none">
        <v-text-field label="请输入关键字" data-src="search.xml" v-model="searchHeaderValue" prepend-inner-icon="search" clearable clear-icon="clear" @keydown.enter="EnterSearch(searchHeaderValue,false)"></v-text-field>
        <div class="mobile-mini-menu">
          <v-btn icon href="/">
              <v-icon>home</v-icon>
          </v-btn>
          <v-btn icon href="/categories/">
              <v-icon>folder</v-icon>
          </v-btn>
          <v-btn icon href="/tags/">
              <v-icon>bookmark</v-icon>
          </v-btn>
          <v-btn icon @click="SetNightMode">
              <v-icon>{{ nightMode }}</v-icon>
          </v-btn>
          
            
            <v-btn icon href="/">
              <v-icon>home</v-icon>
            </v-btn>
          
            
            <v-btn icon href="/archives/">
              <v-icon>archive</v-icon>
            </v-btn>
          
            
            <v-btn icon href="/about/">
              <v-icon>account_circle</v-icon>
            </v-btn>
          
        </div>
      </div>    
    </div>
  </v-col>  
  <v-col cols="4" align-self="end" class="d-none d-md-block">
    <v-col align-self="end">
      <v-text-field label="请输入关键字" data-src="search.xml" v-model="searchHeaderValue" prepend-icon="search" clearable clear-icon="clear" @keydown.enter="EnterSearch(searchHeaderValue,false)"></v-text-field>
    </v-col> 
  </v-col>
</v-row>

                            <v-card class="elevation-2 post-card">
    
    
        <div class="post-header">
  <a class="post-header-title font-weight-medium" href="/2019/07/27/Go-%E8%AF%AD%E6%B3%95%E4%BA%8C-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">Go-语法二-数据类型</a>
  <div class="post-header-meta">   
    <span>
      <v-icon color="">event</v-icon>
      Posted on:&nbsp;2019-07-27
    </span>
    <span>
      <v-icon color="">event_available</v-icon>
      Edited on:&nbsp;2021-10-30
    </span>
    <span>
      <v-icon color="">folder</v-icon>
      In:&nbsp;Uncategorized
    </span>
    
    <span>
      <v-icon color="">visibility</v-icon>
      Views:&nbsp;<span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
    </span>
    
  </div>
</div>

    
    
    
    
    <div class="post-content typo">
        <p>-语法二-数据类型</p>
<h4 id="一、基础类型"><a href="#一、基础类型" class="headerlink" title="一、基础类型"></a>一、基础类型</h4><h5 id="1-布尔类型"><a href="#1-布尔类型" class="headerlink" title="1.布尔类型"></a>1.布尔类型</h5><p>bool：只能存在true/flase， 占据1个字节，不能转换为整型， 0和1也不能转换为布尔</p>
<h5 id="2-数值类型"><a href="#2-数值类型" class="headerlink" title="2.数值类型"></a>2.数值类型</h5><ul>
<li><p>整数类型</p>
<p>整数类型有无符号（int）和带符号（uint）两种，这两种类型的长度相同，到具体长度取决于不同编译器的实现</p>
<p>int8、int16、int32和int64四种有符号整数类型， 分别对应8、16、32、64bit大小的有符号整数、同样uint8、uint16、uint64对应四种无符号整数类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 有符号类型：</span><br><span class="line">int		32位系统占据4个字节（范围和int32一样），64位系统占据8个字节（范围和int64一样）     </span><br><span class="line">int8    占据1字节   范围 -128 ~ 127</span><br><span class="line">int16   占据2字节   范围 -2(15次方) ~ 2（15次方）-1</span><br><span class="line">int32   占据4字节   范围 -2(31次方) ~ 2（31次方）-1</span><br><span class="line">int64   占据8字节   范围 -2(63次方) ~ 2（63次方）-1</span><br><span class="line">rune	int32的别称</span><br><span class="line"></span><br><span class="line"># 无符号类型：</span><br><span class="line">uint	32位系统占据4个字节（范围和uint32一样），64位系统占据8个字节（范围和uint64一样）     </span><br><span class="line">uint8   占据1字节   范围 0 ~ 255</span><br><span class="line">uint16  占据2字节   范围 0 ~ 2（16次方）-1</span><br><span class="line">uint32  占据4字节   范围 0 ~ 2（32次方）-1</span><br><span class="line">uint64  占据8字节   范围 0 ~ 2（64次方）-1</span><br><span class="line">byte	uint8的别称</span><br></pre></td></tr></table></figure>

<p>注意</p>
<ul>
<li>上述类型的变量之前不允许互相赋值或操作， 且int的长度是32bit，但int和int32不能互用</li>
<li>go默认的整型类型是int</li>
<li>查看数据所占据的字节数方法：<code>unsafe.Sizeof()</code></li>
</ul>
</li>
<li><p>浮点类型</p>
<p>浮点类型的分类：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">float32 单精度  占据4字节   范围 -3.403E38 ~ 3.403E38    (math.MaxFloat32)</span><br><span class="line">float64 双精度  占据8字节   范围 -1.798E208 ~ 1.798E308  (math.MaxFloat64)</span><br></pre></td></tr></table></figure>

<ul>
<li>浮点数是有符号的，浮点数在机器中存放形式是：浮点数=符号位+指数位+尾数位</li>
<li>浮点型的范围是固定的，不受操作系统限制</li>
<li>.512这样数可以识别为0.512</li>
<li>科学计数法：5.1234e2 = 5.12 * 10 的 2 次方 5.12E-2 = 5.12/10 的 2 次方</li>
</ul>
<p>精度损失：float32可以提供大约6个十进制数的精度，float64大约可以提供15个十进制的精度（一般选择float64）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num1 <span class="keyword">float32</span> = <span class="number">-123.0000901</span></span><br><span class="line"><span class="keyword">var</span> num2 <span class="keyword">float64</span> = <span class="number">-123.0000901</span> </span><br><span class="line">fmt.Println(<span class="string">&quot;num1=&quot;</span>,num1)		<span class="comment">//-123.00009</span></span><br><span class="line">fmt.Println(<span class="string">&quot;num2=&quot;</span>,num2)		<span class="comment">//-123.0000901</span></span><br></pre></td></tr></table></figure>

<p>无法使用==号判断浮点数， 是不可行的， 替代方案如下“</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">isEqual</span><span class="params">(f1,f2,p <span class="keyword">float64</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">   <span class="keyword">return</span> math.Abs(f1-f2) &lt; p           <span class="comment">//p为用户自定义精度，如：0.00001</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>go中的Nan非数：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> z <span class="keyword">float64</span></span><br><span class="line">fmt.Println(z, -z, <span class="number">1</span>/z, <span class="number">-1</span>/z, z/z) <span class="comment">// &quot;0 -0 +Inf -Inf NaN&quot;</span></span><br></pre></td></tr></table></figure>

<p>注意：函数<code>math.IsNaN</code>用于测试一个数是否是非数<code>NaN</code>，<code>math.NaN</code>则返回非数对应的值。虽然可以用<code>math.NaN</code>来表示一个非法的结果，但是测试一个结果是否是非数<code>NaN</code>则是充满风险的，因为<code>NaN</code>和任何数都是不相等的。</p>
</li>
<li><p>复数</p>
<p>Go还支持复数。它的默认类型是complex128（64位实数+64位虚数）。如果需要小一些的，也有complex64(32位实数+32位虚数)。复数的形式为RE + IMi，其中RE是实数部分，IM是虚数部分，而最后的i是虚数单位。<br>如下所示：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> t <span class="keyword">complex128</span></span><br><span class="line">t = <span class="number">2.1</span> + <span class="number">3.14i</span></span><br><span class="line">t1 = <span class="built_in">complex</span>(<span class="number">2.1</span>,<span class="number">3.14</span>) <span class="comment">//结果同上	</span></span><br><span class="line">fmt.Println(<span class="built_in">real</span>(t))   <span class="comment">//实部：2.1</span></span><br><span class="line">fmt.Println(<span class="built_in">imag</span>(t))   <span class="comment">//虚部：3.14</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3-字符串"><a href="#3-字符串" class="headerlink" title="3.字符串"></a>3.字符串</h5><ul>
<li><p>字符型</p>
<p>go中没有专门的字符类型，如果需要存储单个字符（字母），一般使用byte保存， 且使用单引号包裹</p>
<p>字符类型可以使用%d打印为整数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> (</span><br><span class="line">		c1 <span class="keyword">byte</span> = <span class="string">&#x27;a&#x27;</span></span><br><span class="line">		c2 <span class="keyword">byte</span> = <span class="string">&#x27;0&#x27;</span></span><br><span class="line">	)</span><br><span class="line">    fmt.Println(<span class="string">&quot;c1=&quot;</span>, c1)</span><br><span class="line">    fmt.Println(<span class="string">&quot;c2=&quot;</span>, c2)</span><br><span class="line">    fmt.Printf(<span class="string">&quot;c1=%c, c2=%c\n&quot;</span>, c1, c2)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// var c3 byte = &#x27;你&#x27;</span></span><br><span class="line">    <span class="comment">// fmt.Printf(&quot;c3=%c&quot;, c3) //溢出</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果保存的字符在 ASCII 表的,比如[0-1, a-z,A-Z..]直接可以保存到 byte</li>
<li>如果保存的字符对应码值大于 255,这时我们可以考虑使用 int 类型保存</li>
<li>如果需要安装字符的方式输出，这时我们需要格式化输出，即 fmt.Printf(“%c”, c1)</li>
<li>字符可以和整型进行运算</li>
</ul>
</li>
<li><p>基本使用</p>
<p>字符串就是一串固定长度的字符连接起来的字符序列， Go的字符串是由单个字节连接起来的， 也就是说对于传统的字符串是由字符组成的， 而go的字符串不同， 他是由字节组成的</p>
<p>字符串在Go语言中是基本类型， 内容在初始化后不能修改， go中的字符串都是采用UTF-8字符集编码，使用一对双引号（”“） 或反引号定义。</p>
<p>使用``可以额外解析换行， 及其没有字符串转义功能</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;Hello &quot;</span></span><br><span class="line">str2 := <span class="string">&quot; World!&quot;</span></span><br><span class="line"><span class="comment">// str[0] = &#x27;c&#x27;         //编译报错： cannot assign to 因为字符串不可变</span></span><br><span class="line">fmt.Println(str[<span class="number">0</span>])     <span class="comment">//输出字符串第一个字符 72</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(str))   <span class="comment">//输出长度 6</span></span><br><span class="line">fmt.Println(str + str2) <span class="comment">//输出不带空格的</span></span><br></pre></td></tr></table></figure></li>
<li><p>字符串修改</p>
<p>go中的字符串不可改变，构造一个临时字符串</p>
<ul>
<li><p>通过转换为<code>[]byte</code>类型，构造一个临时字符串</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;hello&quot;</span></span><br><span class="line">strTemp := []<span class="keyword">byte</span>(str)</span><br><span class="line">strTemp[<span class="number">0</span>] = <span class="string">&#x27;c&#x27;</span></span><br><span class="line">strResult := <span class="keyword">string</span>(strTemp)</span><br></pre></td></tr></table></figure></li>
<li><p>字符串可以进行切片操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;hello&quot;</span></span><br><span class="line">str = <span class="string">&quot;c&quot;</span>+ str[<span class="number">1</span>:]		<span class="comment">// 1: 表示从第1位开始到最后</span></span><br></pre></td></tr></table></figure></li>
<li><p>Go和Java等语言一样，字符串默认是不可变的，这样保证了线程安全，大家使用的都是只读对象，无须加锁，且能很方便的共享内存，不必使用写时复制。</p>
</li>
</ul>
</li>
<li><p>字符串遍历</p>
<ul>
<li><p>使用字节数组， 注意每个中文在UTF-8中占据3个字节</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(str); i++ &#123;</span><br><span class="line">fmt.Println(i,str[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>range关键字只是上述方式的简写</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">str := <span class="string">&quot;你好&quot;</span></span><br><span class="line"><span class="keyword">for</span> i,ch := <span class="keyword">range</span> str &#123;</span><br><span class="line">fmt.Println(i,ch)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：Unicode字符遍历需要使用range，原因见len()函数部分讲解。</p>
</li>
</ul>
</li>
<li><p>字符串转换</p>
<p>字符串转换的函数在<code>strconv</code>中， 下面列出一些常用的：</p>
<ul>
<li><p>Append系列，该函数将整数转换为字符串后，添加到现有的字节数组中</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main  </span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strconv&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str := <span class="built_in">make</span>([]<span class="keyword">byte</span>, <span class="number">0</span>, <span class="number">100</span>)</span><br><span class="line">	str = strconv.AppendInt(str, <span class="number">4567</span>, <span class="number">10</span>)</span><br><span class="line">	str = strconv.AppendBool(str, <span class="literal">false</span>)</span><br><span class="line">	str = strconv.AppendQuote(str, <span class="string">&quot;abcdefg&quot;</span>)</span><br><span class="line">	str = strconv.AppendQuoteRune(str, <span class="string">&#x27;杨&#x27;</span>)</span><br><span class="line">	fmt.Println(<span class="keyword">string</span>(str))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>len()函数</p>
<p>len()函数是go语言的内建函数，可以用来获取切片、字符串、通道等的长度</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;unicode/utf8&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	str1 := <span class="string">&quot;hello world&quot;</span></span><br><span class="line">	str2 := <span class="string">&quot;你好，&quot;</span></span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(str1))							<span class="comment">// 11</span></span><br><span class="line">	fmt.Println(<span class="built_in">len</span>(str2))							<span class="comment">// 9</span></span><br><span class="line">	fmt.Println(utf8.RuneCountInString(str2))		<span class="comment">// 3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>由于go才有UTF-8格式保存中文， 每个中文占据3个字节，go中计算utf-8字符串格式的长度应该使用<code>utf8.RuneCountInString</code></p>
</li>
<li><p>字符串索引</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">	str := <span class="string">&quot;hello,world!&quot;</span></span><br><span class="line"></span><br><span class="line">	index := strings.Index(str, <span class="string">&quot;w&quot;</span>)</span><br><span class="line"></span><br><span class="line">	fmt.Println(index)					<span class="comment">// 6</span></span><br><span class="line">	fmt.Println(str[index])				<span class="comment">// 119 ASCII中的值</span></span><br><span class="line">	fmt.Println(str[index:])			<span class="comment">// world!</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>strings.Index: 正向搜索字符串</li>
<li>strings.LastIndex: 反向搜索字符串</li>
</ul>
</li>
<li><p>字符串连接</p>
<p>使用<code>+</code>能够连接字符串。但是该操作并不高效。Go中也拥有类似Java的<code>StringBuilder</code>机制来进行高效字符串连接：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">str1 := <span class="string">&quot;hellow&quot;</span></span><br><span class="line">str2 := <span class="string">&quot; world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建字节缓冲</span></span><br><span class="line"><span class="keyword">var</span> stringBuilder bytes.Buffer</span><br><span class="line"></span><br><span class="line"><span class="comment">//把字符串写入缓冲</span></span><br><span class="line">stringBuilder.WriteString(str1)</span><br><span class="line">stringBuilder.WriteString(str2)</span><br><span class="line"></span><br><span class="line"><span class="comment">//将缓冲以字符串形式输出</span></span><br><span class="line">fmt.Println(stringBuilder.String())</span><br></pre></td></tr></table></figure>

<p>注意：bytes.Buffer可以写入各种字节数组，字符串也是一种字节数组。</p>
</li>
<li><p>其他操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//查找s在字符串str中的索引</span></span><br><span class="line">Index(str, s <span class="keyword">string</span>) <span class="keyword">int</span>    示例：strings.Index(str, <span class="string">&quot;,&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断str是否包含s</span></span><br><span class="line">Contains(str, s <span class="keyword">string</span>) <span class="keyword">bool</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过字符串str连接切片 s</span></span><br><span class="line">Join(s []<span class="keyword">string</span>, str <span class="keyword">string</span>) <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//替换字符串str中old字符串为new字符串，n表示替换的次数，小于0全部替换</span></span><br><span class="line">Replace(str,old,<span class="built_in">new</span> <span class="keyword">string</span>,n <span class="keyword">int</span>) <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//字符串str按照s分割，返回切片</span></span><br><span class="line">Splite(str,s <span class="keyword">string</span>)[]<span class="keyword">string</span></span><br><span class="line"><span class="comment">//Append系列函数将整数等转换为字符串后，添加到现有的字节数组中</span></span><br><span class="line"><span class="comment">//Format系列函数可以把其他类型转换为字符串</span></span><br><span class="line"><span class="comment">//Trim函数可以去除头部、尾部指定的字符串</span></span><br><span class="line"><span class="comment">//Fields函数可以去除空格，返回切片</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="4-数据类型转换"><a href="#4-数据类型转换" class="headerlink" title="4.数据类型转换"></a>4.数据类型转换</h5><ul>
<li><p>显示转换</p>
<p>go在不同类型的变量之间赋值时需要显示转换， 也就是说golang中数据类型不能自动转换</p>
</li>
<li><p>数值类型转换</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i <span class="keyword">int32</span> = <span class="number">100</span></span><br><span class="line"><span class="keyword">var</span> n1 <span class="keyword">float64</span> = <span class="keyword">float64</span>(i)</span><br><span class="line">fmt.Printf(<span class="string">&quot;n1=%v&quot;</span>, n1)	<span class="comment">//输出100</span></span><br></pre></td></tr></table></figure>

<p>注意：在转换中，比如将<code>int64</code>转成<code>int8【-128---127】</code>，编译时不会报错，只是转换的结果是按溢出处理，和我们希望的结果不一样。 因此在转换时，需要考虑范围。</p>
</li>
<li><p>基本数据类型与字符串转换</p>
<ul>
<li><p>基本数据类型转字符串， <code>fmt.Sprintf()</code> 该函数会返回转换后的字符串</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> b <span class="keyword">bool</span> = <span class="literal">true</span></span><br><span class="line"><span class="keyword">var</span> str <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line">str = fmt.Sprintf(<span class="string">&quot;%t&quot;</span>, b)</span><br><span class="line">fmt.Printf(str)				<span class="comment">//true</span></span><br></pre></td></tr></table></figure></li>
<li><p>字符串转基本数据类型， 使用包<code>strconv</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str <span class="keyword">string</span> = <span class="string">&quot;true&quot;</span></span><br><span class="line"><span class="keyword">var</span> b <span class="keyword">bool</span></span><br><span class="line">b, _ = strconv.ParseBool(str)</span><br><span class="line">fmt.Printf(<span class="string">&quot;%v&quot;</span>, b)</span><br></pre></td></tr></table></figure>

<p>在将<code>string</code>类型转成基本数据类型时， 要确保<code>string</code>类型能够转成有效的数据， 比如可以把’123’转成一个整数， 但不能转换成“hello”， 如果这样做的话，go会直接将其转换成0，其他类型也一样</p>
</li>
</ul>
</li>
</ul>
<h5 id="5-类型别名"><a href="#5-类型别名" class="headerlink" title="5.类型别名"></a>5.类型别名</h5><ul>
<li><p>类型别名的使用</p>
<p>Go在1.9版本加入了类型别名。主要用于代码升级、迁移中类型的兼容问题（C/C++中使用宏来解决重构升级带来的问题）。  </p>
<p>Go1.9之前的版本内建类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> <span class="keyword">uint8</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> <span class="keyword">int32</span></span><br></pre></td></tr></table></figure>

<p>Go1.9之后的版本内建类型：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="keyword">byte</span> = <span class="keyword">uint8</span></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">rune</span> = <span class="keyword">int32</span></span><br></pre></td></tr></table></figure>

<p>类型定义是定义了一个全新的类型的类型。<br>类型别名只是某个类型的小名，并非创造了新的类型。  </p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a1 MyInt</span><br><span class="line">fmt.Printf(<span class="string">&quot;a1 type: %T\n&quot;</span>, a1)			<span class="comment">//main.MyInt</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">var</span> a2 AliasInt</span><br><span class="line">fmt.Printf(<span class="string">&quot;a2 type: %T\n&quot;</span>, a2)			<span class="comment">//int</span></span><br></pre></td></tr></table></figure></li>
<li><p>不同包下的类型别名</p>
<p>注意：不能为不在同一个包中的类型上定义方法。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MyDuration = time.Duration</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m MyDuration)</span> <span class="title">Test</span><span class="params">(str <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方案：使用别名定义<code>（type MyDuration time.Duration）</code>，且将定义放在time包中</p>
</li>
</ul>
<h4 id="二、复合类型"><a href="#二、复合类型" class="headerlink" title="二、复合类型"></a>二、复合类型</h4><h5 id="1-数组"><a href="#1-数组" class="headerlink" title="1.数组"></a>1.数组</h5><ul>
<li><p>数组的声明</p>
<p>数组是一段固定长度的连续内存区域。数组的长度定义后不可更改，长度使用 len() 获取。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 [<span class="number">10</span>]<span class="keyword">int</span>					<span class="comment">//定义长度为10的整型数组，很少这样使用</span></span><br><span class="line">arr2 [<span class="number">5</span>]<span class="keyword">int</span> := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;	<span class="comment">//定义并初始化</span></span><br><span class="line">arr3 := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>&#125;			<span class="comment">//自动推导并初始化</span></span><br><span class="line">arr4 := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>&#125;					<span class="comment">//指定总长度，前几位被初始化，没有的使用零值</span></span><br><span class="line">arr5 := [<span class="number">5</span>]<span class="keyword">int</span>&#123;<span class="number">2</span>:<span class="number">10</span>, <span class="number">4</span>:<span class="number">11</span>&#125;			<span class="comment">//有选择的初始化，没被初始化的使用零值</span></span><br><span class="line">arr6 := [...]<span class="keyword">int</span>&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;				<span class="comment">//自动计算长度</span></span><br></pre></td></tr></table></figure></li>
<li><p>数组常用操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr[:]      代表所有元素</span><br><span class="line">arr[:<span class="number">5</span>]     代表前五个元素</span><br><span class="line">arr&#123;<span class="number">5</span>:&#125;     代表从第<span class="number">5</span>个开始，不包含第<span class="number">5</span>个</span><br><span class="line"><span class="built_in">len</span>(arr)    数组的长度</span><br></pre></td></tr></table></figure></li>
<li><p>数组的遍历</p>
<ul>
<li><p>for循环遍历</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(arr); i++ &#123;</span><br><span class="line">	fmt.Println(arr[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>for-range遍历</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr := [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> arr &#123;</span><br><span class="line">    fmt.Println(i)	<span class="comment">//元素位置	</span></span><br><span class="line">    fmt.Println(v)	<span class="comment">//元素值</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>注意</p>
<p>数组创建完长度就固定，不可以再追加元素；  </p>
<p>长度是数组类型的一部分，因此[3]int与[4]int是不同的类型；  </p>
<p>数组之间的赋值是值的赋值，即当把一个数组作为参数传入函数的时候，传入的其实是该函数的副本，而不是他的指针。</p>
</li>
</ul>
<h5 id="2-结构体"><a href="#2-结构体" class="headerlink" title="2.结构体"></a>2.结构体</h5><p>Go语言通过用自定义的方式形成新的类型。Go语言使用结构体和结构体成员来描述真实世界。  </p>
<p>Go语言没有类的概念，也不支持类的继承等面向对象思想。Go语言的结构体内嵌配合接口比面向对象具有更高的扩展性和灵活性。  </p>
<p>Go语言不仅认为结构体能拥有方法，且每种自定义类型也可以拥有自己的方法。</p>
<ul>
<li><p>结构体的作用</p>
<p>结构体可以用来声明一个新的类型，作为与其他类的属性/字段的容器，如定义一个服务器结构体</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> &#123;</span><br><span class="line">	hostname <span class="keyword">string</span></span><br><span class="line">	manage_ip <span class="keyword">string</span></span><br><span class="line">	login_username <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 按顺序初始化，每个成员都必须初始化</span></span><br><span class="line"><span class="keyword">var</span> s1 Server = Server&#123;<span class="string">&quot;db_server1&quot;</span>, <span class="string">&quot;192.168.75.138&quot;</span>, <span class="string">&quot;localhost&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按顺序初始化， 没有被初始化的，自动赋值 零</span></span><br><span class="line">s2 := Server&#123;manage_ip:<span class="string">&quot;192.168.75.138&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// new 申请结构体</span></span><br><span class="line">s3 := <span class="built_in">new</span>(Server)</span><br><span class="line">s3.manage_ip = <span class="string">&quot;192.168.75.138&quot;</span></span><br><span class="line">s3.hostname = <span class="string">&quot;db_server1&quot;</span></span><br><span class="line">s3.login_username = <span class="string">&quot;root&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接声明</span></span><br><span class="line"><span class="keyword">var</span> s4 Server</span><br><span class="line">s4.manage_ip = <span class="string">&quot;192.168.75.138&quot;</span></span><br><span class="line">s4.hostname = <span class="string">&quot;db_server1&quot;</span></span><br><span class="line">s4.login_username = <span class="string">&quot;root&quot;</span></span><br></pre></td></tr></table></figure>

<p>struct的结构体中的类型是任意类型， 且储存空间是连续的，其字段按照声明时的顺序存放</p>
<p>如果结构体的所有的成员都是可以比较的， 那么结构体本身也是可以比较的，使用 == !=，不支持&lt; 和 &gt;</p>
<p>注意：如果结构体的成员要被包外调用， 需要大写首字母。</p>
</li>
<li><p>取结构体地址与实例化</p>
<p>对结构体的new其实是生成了一个指针类型， 其实对结构体进行&amp;取地址操作时，也可以视为对该类型进行一次new的实例化操作</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ins := &amp;T&#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// T是结构体</span></span><br><span class="line"><span class="comment">// ins为结构体的实例， 类型为*T，是指针类型</span></span><br></pre></td></tr></table></figure></li>
<li><p>匿名字段</p>
<p>struct的字段名元类型一一对应，如果不提供名字，则为匿名字段</p>
<p>如果匿名字段是一个struct时， 这个struct拥有的全部字段都被隐式引入了当前的struct。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ServerType <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	id <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> &#123;</span><br><span class="line">	ServerType <span class="comment">// 匿名字段， 那么默认Server就包含了ServerType的所有字段</span></span><br><span class="line">	hostname <span class="keyword">string</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不仅仅是struct， 其他所有内置类型和自定义类型都可以做为匿名字段</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Memory []<span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ServerType <span class="keyword">struct</span> &#123;</span><br><span class="line">	name <span class="keyword">string</span></span><br><span class="line">	id <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Server <span class="keyword">struct</span> &#123;</span><br><span class="line">	ServerType <span class="comment">// 匿名字段， 那么默认Server就包含了ServerType的所有字段</span></span><br><span class="line">	hostname <span class="keyword">string</span> </span><br><span class="line">	<span class="keyword">int</span></span><br><span class="line">	Memory <span class="comment">// 匿名字段</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 初始化</span></span><br><span class="line">	db_1 := Server&#123;ServerType&#123;<span class="string">&quot;linux&quot;</span>, <span class="number">1</span>&#125;, <span class="string">&quot;test&quot;</span>, <span class="number">1</span>, []<span class="keyword">string</span>&#123;<span class="string">&quot;ykyk&quot;</span>&#125;&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(<span class="string">&quot;hostname&quot;</span>, db_1.hostname)</span><br><span class="line">	fmt.Println(<span class="string">&quot;server_type&quot;</span>, db_1.ServerType.name)</span><br><span class="line">	fmt.Println(<span class="string">&quot;memory&quot;</span>, db_1.Memory)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改</span></span><br><span class="line">	db_1.Memory = []<span class="keyword">string</span>&#123;<span class="string">&quot;yangkai&quot;</span>&#125;</span><br><span class="line">	fmt.Println(<span class="string">&quot;memory&quot;</span>, db_1.Memory)</span><br><span class="line">	db_1.Memory = <span class="built_in">append</span>(db_1.Memory, <span class="string">&quot;NewBee&quot;</span>)</span><br><span class="line">	fmt.Println(<span class="string">&quot;memory&quot;</span>, db_1.Memory)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 修改匿名字段</span></span><br><span class="line">	db_1.<span class="keyword">int</span> = <span class="number">100</span></span><br><span class="line">	fmt.Println(db_1.<span class="keyword">int</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意：</p>
<p>​    如果SeverType里面的有一个字段叫做name，而Server里面也有一个字段叫做name， 那么该怎么办</p>
<p>最外层访问优先， 也就是如果使用Server.name 访问的时候，是访问Server里面的字段，而不是ServerType的字段</p>
</li>
<li><p>内嵌结构体</p>
<p>当前结构体可以直接访问其内嵌结构体的内部字段</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Animal <span class="keyword">struct</span> &#123;</span><br><span class="line">	Age <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person <span class="keyword">struct</span> &#123;</span><br><span class="line">	Animal</span><br><span class="line">	Name <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Student <span class="keyword">struct</span> &#123;</span><br><span class="line">	Person</span><br><span class="line">	ClassName <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	s1 := Student&#123;</span><br><span class="line">		Person&#123;</span><br><span class="line">			Animal: Animal &#123;</span><br><span class="line">				Age: <span class="number">15</span>,</span><br><span class="line">			&#125;,</span><br><span class="line">			Name: <span class="string">&quot;ykky&quot;</span>,</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="string">&quot;function&quot;</span>,</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	fmt.Println(s1.Age)</span><br><span class="line">	fmt.Println(s1.Person.Name)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s2 Student</span><br><span class="line">	s2.Name = <span class="string">&quot;ss&quot;</span></span><br><span class="line">	s2.Age = <span class="number">10</span></span><br><span class="line">	s2.ClassName = <span class="string">&quot;new function&quot;</span></span><br><span class="line">	fmt.Println(s2.Age)</span><br><span class="line">	fmt.Println(s2.Person.Name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>

    </div>
    <!--文末结束语-->
    
        <div style="text-align:center;color: #ccc;font-size:24px;"> --- <i class="fas fa-heart"></i> The End --- </div>
    
    <!--页脚广告-->
    
    <v-divider></v-divider>
    
    <div class="post-nav">             
        
            <div class="post-nav-button float-left">
                <v-icon>chevron_left</v-icon>
                <a class="font-weight-bold text-left" href="/2019/07/30/Go-%E8%AF%AD%E6%B3%95%E4%B8%89-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/">
                    Go-语法三-数据类型
                </a>
            </div>
              
          
            <div class="post-nav-button float-right">
                <a class="font-weight-bold text-right" href="/2019/07/26/Go-%E8%AF%AD%E6%B3%95%E4%B8%80-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E3%80%81%E8%BF%90%E7%AE%97%E7%AC%A6%E3%80%81%E8%BF%9B%E5%88%B6%E8%BD%AC%E6%8D%A2/">      
                    Go-语法一-流程控制、运算符、进制转换
                </a>
                <v-icon>chevron_right</v-icon>
            </div>
        
    </div>
</v-card>



        
                            <div id="mobile-footer" class="d-block d-md-none">
                                <v-divider></v-divider>
                                <div id="mobile-footer-content">
                                    <span>Theme: <a target="_blank" rel="noopener" href="https://github.com/kb1000fx/hexo-theme-insulin">Insulin</a> &nbsp; Powered by <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a></span><br>
                                    <span> &copy; 2015 - 2021 yhkl</span>
                                </div>
                            </div>                   
                        </v-col>                                            
                    </v-row>
                </v-container>
            </v-content>
        </v-app>
    </div>
    
<script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script>
<script src="https://cdn.jsdelivr.net/npm/vuetify@2.2.30"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/js-base64@3.5.2/base64.min.js"></script>

<script src="/js/main.js"></script>




    <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




    <script src="https://cdn.jsdelivr.net/npm/mermaid@8.4.8/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({
        startOnLoad: true,
        theme: "default"
    });</script>





</body>
</html>